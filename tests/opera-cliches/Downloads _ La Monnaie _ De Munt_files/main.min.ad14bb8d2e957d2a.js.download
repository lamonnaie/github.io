/*
 * MONNAIE_DEMUNT
 *
 * 2.2.11 19-10-2018
 * by Tentwelve <info@tentwelve.com>
 *
 */

var $w=$(window),ww=$w.width(),$alert=$(".alert"),wwCalc=function(){$w.on("resize",$.debounce(100,function(){ww=$(this).width()}))},flickGallery=function(){var o,s,e=$(".carousel"),a={cellAlign:"center",resize:!1,contain:!0,wrapAround:!0,imagesLoaded:!0,cellSelector:".slide",prevNextButtons:!0,pageDots:!0,watchCSS:!0,selectedAttraction:.1,friction:1.5,autoPlay:6666},i={cellAlign:"center",resize:!1,contain:!1,wrapAround:!1,imagesLoaded:!1,cellSelector:".slide",percentPosition:!1,prevNextButtons:!0,pageDots:!1,watchCSS:!1,freeScroll:!0,freeScrollFriction:.03};e.each(function(e,t){var n=$(t);1<(o=n.find(".slide").length)&&(n.hasClass("home-carousel")?s=a:n.hasClass("cal-carousel")?(s=i).initialIndex=n.find(".focus").index():s={cellAlign:"center",resize:!1,contain:3<o,wrapAround:3<o,imagesLoaded:!0,cellSelector:".slide",prevNextButtons:2<o,pageDots:2<o,watchCSS:!0,selectedAttraction:.1,friction:1.5},n.imagesLoaded(function(){n.addClass("flickity").flickity(s)}),$w.on("resize",$.debounce(500,function(){n.imagesLoaded(function(){n.flickity("resize").flickity("select",n.find(".focus").index())})})))})},masonGrid=function(){var s={percentPosition:!0,itemSelector:".item",columnWidth:".item"};$(".masonry .inner-grid").each(function(e,t){var n=$(t),o=$(t).find(".item").length;n.imagesLoaded(function(){var t=[];n.masonry(s).find(".item").each(function(e){t.push($(this)),setTimeout(function(){t[e].addClass("loaded")},200*e+250)}),setTimeout(function(){n.addClass("loaded")},200*o+250)})})},menuFold=function(){var e=$(".inner-header"),t=$(".menu-wrapper"),s=$(".menu-container"),n=$("html.mdzr-touchevents").length;function o(e){var t,n=$(e),o=n.closest("li").siblings("li");o.children("a").removeClass("active").blur().next(".level-2").removeClass("unfold"),ww<512&&o.find(".level-2").stop().slideUp("fast"),n.addClass("active").blur().next(".level-2").addClass("unfold"),ww<512&&n.next(".level-2").stop().slideDown("fast",$.debounce(500,function(){t=n.closest("li").position().top,s.animate({scrollTop:t},"slow")}))}if(e.on("click",".menu-btn",function(){$alert.length&&$alert.slideToggle("fast"),window.pageYOffset<1&&e.toggleClass("donker"),$(this).toggleClass("close"),t.toggleClass("unfold").closest("body").toggleClass("no-scroll"),t.hasClass("unfold")&&(s.find(".active").removeClass("active").end().find(".unfold").removeClass("unfold"),s.find(".current").addClass("active").closest(".level-2").addClass("unfold").prev(".js-has-children").addClass("active"))}),$w.on("touchmove",".main-header, .menu-wrapper",function(e){$("body").hasClass("no-scroll")&&e.preventDefault()}),t.on("click",".menu > a",function(e){n&&$(this).hasClass("js-has-children")&&e.preventDefault(),o(this)}).on("mouseenter",".menu > a",function(){o(this)}).on("click",function(){e.find(".menu-btn").click()}).on("click",".menu",function(e){e.stopPropagation()}),$w.on("load scroll",function(){1<=window.pageYOffset?e.addClass("donker"):e.removeClass("donker")}),0<$alert.length){var a=$alert.closest("body");$w.on("load scroll",function(){window.pageYOffset>=$alert.outerHeight()?a.addClass("fixed"):a.removeClass("fixed")}),$alert.on("click",".close",function(){var e=$(this).data("etag");Cookies.set("alert-closed-"+e,1,{expires:2,path:"/"}),$alert.slideUp("fast",function(){a.removeClass("has-alert"),$alert.remove()})})}},subNav=function(){var e=$(".subnav"),t=$(".inner-header").height(),n=0,o=!1;0<e.length&&$w.on("load scroll resize",function(){n=e.offset().top-t,512<=ww&&window.pageYOffset>=n?(e.addClass("fixed"),o=!0):o&&(e.removeClass("fixed"),o=!1)})},filtersDropdown=function(){var e=$("#filters");0<e.length&&e.on("click",".current",function(e){ww<512&&(e.preventDefault(),$(this).toggleClass("active").siblings("li").slideToggle("fast"))})},anchorWhat=function(){var e,n,t=$("#anchors");if(0<t.length){var o=$(".anchor");t.on("click",".linka",function(e){e.preventDefault();var t=$(this),n=t.attr("href"),o=$(n).offset().top;$("html, body").animate({scrollTop:o},"fast",$.debounce(500,function(){t.addClass("active").closest("li").siblings("li").find(".linka").removeClass("active")}))}),$w.on("load scroll resize",$.debounce(100,function(){o.map(function(e,t){window.pageYOffset>=o.eq(e).offset().top-100&&(n=e)}),n!==e&&(t.find(".linka").removeClass("active").blur(),t.find("li").eq(n).find(".linka").addClass("active"),e=n)}))}},fcbx=function(){$(".fcbx").fancybox({padding:0,margin:[96,64,96,64],height:"auto",autoSize:!1,autoResize:!0,autoCenter:!0,aspectRatio:!1,arrows:!0,closeBtn:!0,closeClick:!1,nextEffect:"fade",prevEffect:"fade",helpers:{title:{type:"inside"},overlay:{closeClick:!1}},beforeLoad:function(){if(ww<512){if("ajax"===this.type)return window.location.href=$(this.element).attr("href"),!1;if("image"===this.type)return!1}else $(".alert").length&&$alert.slideUp("fast");"ajax"===this.type&&(this.aspectRatio=!0)},afterShow:function(){$(this.element).data("fancybox-group")&&$(".fancybox-wrap").swipe({swipe:function(e,t){"left"===t?$.fancybox.prev(t):"right"===t&&$.fancybox.next(t)}})}})},readMore=function(){$(".read-more").on("click",function(e){e.preventDefault();var t=$(this);$(".more-text").slideDown("fast",function(){t.slideUp("fast")})})},a11yFocusParent=function(){$(".mdzr-no-touchevents").find(".js-a11y-focus").on("focus","a",function(e){$(this).closest(".js-a11y-focus").addClass("focus")}).on("blur","a",function(e){$(this).closest(".js-a11y-focus").removeClass("focus")})},ajaxSchedule=function(){var o=$("#calendar_schedules");function s(e){var t=$("#"+e),n=t.attr("href");t.closest("li").addClass("focus").siblings("li").removeClass("focus"),t.closest(".carousel").flickity("select",t.closest("li").index()),o.stop().slideUp("fast",function(){o.load(n+" #calendar_schedules",function(){o.stop().slideDown("fast")})})}$(".cal-carousel").on("click","a",function(e){e.preventDefault();var t=$(this),n=t.attr("id"),o=t.attr("href");s(n),history.pushState(n,"",o)}),$w.on("popstate",function(e){s(e.originalEvent.state)})},searchBtn=function(){$(".main-header").on("click",".js-search-btn",function(e){e.preventDefault(),$("body").addClass("search-focus"),setTimeout(function(){$(".main-header").find(".search-input").focus()},500)}).on("click",function(e){e.stopPropagation()}),$(".top-search .search-input").on("blur",function(){$(this).closest("body").removeClass("search-focus")}),$w.on("click",function(){$("body").removeClass("search-focus")})},jsHistory=function(){$(".js-history").on("click",function(e){0<document.referrer.indexOf($(this).attr("href"))&&1<window.history.length&&(e.preventDefault(),window.history.back())})},splashClose=function(){var t=$(".splash");t.length&&t.on("click",".splash-close",function(e){e.preventDefault(),t.fadeOut("fast")}).on("click",".inner-splash",function(e){e.stopPropagation()}).on("click",function(e){t.fadeOut("fast")})},tableWrapper=function(){var e=$(".text, .longread__body").find("table");e.length&&e.wrap('<div class="table-wrapper"></div>')},cookieMonster=function(){window.cookieconsent.initialise({content:cc_content})};$(document).ready(function(){FastClick.attach(document.body),document.addEventListener("touchstart",function(){},!0),wwCalc(),menuFold(),flickGallery(),masonGrid(),subNav(),anchorWhat(),fcbx(),filtersDropdown(),readMore(),a11yFocusParent(),ajaxSchedule(),searchBtn(),jsHistory(),plyr.setup(".js-plyr"),splashClose(),tableWrapper(),cookieMonster()});